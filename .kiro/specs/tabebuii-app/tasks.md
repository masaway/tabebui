# 実装計画

- [ ] 1. プロジェクト初期設定とSupabase環境構築
  - React Native Expoプロジェクトを作成し、基本的なプロジェクト構造を設定する
  - Supabaseプロジェクトを作成し、データベース接続を設定する
  - 必要なライブラリ（@supabase/supabase-js、react-native-async-storage等）をインストールする
  - _要件: 1.1, 2.1, 3.1_

- [ ] 2. データベーススキーマとマスターデータの実装
- [ ] 2.1 Supabaseデータベーステーブルの作成
  - profiles、animal_parts、eating_records、restaurants等の全テーブルをSQLで作成する
  - Row Level Security (RLS) ポリシーを設定する
  - パフォーマンス最適化用のインデックスを作成する
  - _要件: 1.1, 2.1, 3.1, 6.1, 7.1_

- [ ] 2.2 部位マスターデータの投入
  - 牛・豚・鳥の部位マスターデータを作成し、データベースに投入する
  - 各部位の説明、調理法、希少度、栄養情報を含む包括的なデータセットを作成する
  - 部位データの取得・表示機能をテストする
  - _要件: 1.2, 4.1, 4.2, 5.1, 5.2, 5.3_

- [ ] 3. 認証システムの実装
- [ ] 3.1 Supabase認証の統合
  - Supabase Authを使用したユーザー登録・ログイン機能を実装する
  - メール認証フローを設定する
  - 認証状態管理とセッション管理を実装する
  - _要件: 1.1, 2.1, 3.1_

- [ ] 3.2 ユーザープロフィール管理機能
  - プロフィール作成・編集画面を実装する
  - プロフィール画像のアップロード機能をSupabase Storageで実装する
  - ユーザー名の重複チェック機能を実装する
  - _要件: 1.1, 2.1, 3.1_

- [ ] 4. 部位記録機能の実装
- [ ] 4.1 部位選択と記録作成UI
  - 動物選択画面（牛・豚・鳥）を実装する
  - 部位選択画面を実装し、食べた部位と未食部位を視覚的に区別表示する
  - 部位記録作成フォーム（写真、メモ、日付、場所）を実装する
  - _要件: 1.1, 1.2, 1.3, 2.2_

- [ ] 4.2 写真撮影とアップロード機能
  - カメラ機能を統合し、部位の写真撮影機能を実装する
  - Supabase Storageへの画像アップロード機能を実装する
  - 画像の圧縮とリサイズ機能を実装する
  - _要件: 1.1, 1.3, 3.1_

- [ ] 4.3 位置情報とお店管理機能
  - 位置情報取得機能を実装する
  - お店の検索・選択・新規追加機能を実装する
  - 近くのお店提案機能を実装する
  - _要件: 1.3, 6.1, 6.2, 6.3_

- [ ] 5. 進捗管理システムの実装
- [ ] 5.1 進捗計算とデータ更新ロジック
  - 部位記録時の進捗率自動計算機能を実装する
  - user_progressテーブルの更新ロジックを実装する
  - 週目管理機能を実装する
  - _要件: 1.4, 2.1, 2.3, 13.1, 13.2, 14.1, 14.2_

- [ ] 5.2 進捗表示画面
  - 動物別制覇率表示画面を実装する
  - 全体制覇率とパーセンテージ表示を実装する
  - 食べた部位と未食部位の視覚的表示を実装する
  - _要件: 2.1, 2.2, 2.3, 15.1_

- [ ] 6. 食事履歴と記録管理機能
- [ ] 6.1 食事履歴表示機能
  - 時系列順の食事記録一覧画面を実装する
  - 記録詳細表示画面（写真、メモ、日付、場所）を実装する
  - 記録の編集・削除機能を実装する
  - _要件: 3.1, 3.2, 3.3, 3.4_

- [ ] 6.2 お店別記録表示機能
  - 訪問したお店一覧画面を実装する
  - お店別食事履歴表示機能を実装する
  - お店での制覇率と食べた部位数表示を実装する
  - _要件: 7.1, 7.2, 7.3, 7.4_

- [ ] 7. ウィッシュリスト機能の実装
- [ ] 7.1 食べたいリスト管理
  - 「食べたい」リストへの追加・削除機能を実装する
  - 部位とお店の組み合わせ管理機能を実装する
  - 優先度設定機能を実装する
  - _要件: 4.3, 8.1, 8.2, 8.4_

- [ ] 7.2 メニュー管理とウィッシュリスト連携
  - お店のメニュー項目追加・編集機能を実装する
  - メニューから「食べたい」リストへの簡単追加機能を実装する
  - 「食べたい」から「食べた」への移行機能を実装する
  - _要件: 8.3, 9.1, 9.2, 9.3_

- [ ] 8. ゲーミフィケーション機能の実装
- [ ] 8.1 レベル・経験値システム
  - 部位記録時の経験値付与ロジックを実装する
  - レベルアップ計算とレベルアップ通知機能を実装する
  - ボーナス経験値計算機能（連続記録等）を実装する
  - _要件: 10.1, 10.4, 15.4_

- [ ] 8.2 バッジシステム
  - バッジマスターデータの作成と投入を行う
  - バッジ獲得条件チェック機能を実装する
  - バッジコレクション表示画面を実装する
  - _要件: 2.4, 10.2, 10.3, 13.4_

- [ ] 9. チャレンジシステムの実装
- [ ] 9.1 チャレンジ管理機能
  - 週間・月間チャレンジのマスターデータを作成する
  - チャレンジ進捗追跡機能を実装する
  - チャレンジ達成判定と報酬付与機能を実装する
  - _要件: 11.1, 11.2, 11.4_

- [ ] 9.2 チャレンジ表示とユーザー体験
  - アクティブなチャレンジ一覧表示を実装する
  - チャレンジ進捗表示と残り時間表示を実装する
  - 季節限定・イベント限定チャレンジ機能を実装する
  - _要件: 11.3, 11.4_

- [ ] 10. ランキングシステムの実装
- [ ] 10.1 ランキング計算とデータ管理
  - 全体ランキング、月間ランキングの計算ロジックを実装する
  - ランキングデータの定期更新機能をEdge Functionsで実装する
  - ランキング順位変動の追跡機能を実装する
  - _要件: 12.1, 12.2_

- [ ] 10.2 ランキング表示機能
  - ランキング一覧表示画面を実装する
  - 自分の順位と前回からの変動表示を実装する
  - 特別ランキング（月間最多等）表示を実装する
  - _要件: 12.2, 12.3, 12.4_

- [ ] 11. 統計・分析機能の実装
- [ ] 11.1 統計データ計算
  - 総制覇率、動物別制覇率の計算機能を実装する
  - 月別・年別の食べた部位数推移計算を実装する
  - 各種記録（最初・最後・最多部位等）の計算を実装する
  - _要件: 15.1, 15.2, 15.3_

- [ ] 11.2 統計表示画面
  - ゲーミフィケーションされた統計画面を実装する
  - グラフとチャートによる視覚的な進捗表示を実装する
  - 週目間比較機能を実装する
  - _要件: 14.4, 15.1, 15.2, 15.3, 15.4_

- [ ] 12. Edge Functions実装
- [ ] 12.1 進捗更新用Edge Function
  - 部位記録時の自動進捗更新機能をEdge Functionsで実装する
  - バッジ獲得条件チェック機能を実装する
  - チャレンジ進捗更新機能を実装する
  - _要件: 1.4, 2.3, 10.2, 11.2_

- [ ] 12.2 定期処理用Edge Functions
  - ランキング更新の定期処理を実装する
  - チャレンジの開始・終了処理を実装する
  - 統計データの定期更新処理を実装する
  - _要件: 11.1, 12.1_

- [ ] 13. UI/UX改善とテスト
- [ ] 13.1 ユーザビリティ向上
  - アプリ全体のナビゲーション改善を行う
  - ローディング状態とエラーハンドリングの改善を行う
  - オフライン対応機能を実装する
  - _要件: 全要件_

- [ ] 13.2 テスト実装
  - 主要機能の単体テストを作成する
  - 統合テストとE2Eテストを作成する
  - パフォーマンステストを実行し、最適化を行う
  - _要件: 全要件_